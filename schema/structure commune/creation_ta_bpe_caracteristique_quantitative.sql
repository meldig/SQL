/*
Creation de la table G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE pour faire la liaison entre un equipement de la BPE vers ses caractéristiques numerique.
*/
-- 1. Création de la table
CREATE TABLE G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE(
	objectid NUMBER(38,0) GENERATED BY DEFAULT AS IDENTITY START WITH 1 INCREMENT BY 1,
    fid_bpe NUMBER(38,0),
    fid_libelle NUMBER(38,0),
    nombre NUMBER(38,0)
	);

-- 2. Création des commentaires
COMMENT ON TABLE G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE IS 'Table de relation entre les equipements et les libelles ou l''information et sous la forme d''un nombre: exemple NB_SALLES: 4. L''équipement dispose de 4 salles';
COMMENT ON COLUMN G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE.objectid IS 'Clé primaire de la table G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE.';
COMMENT ON COLUMN G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE.fid_bpe IS 'Clé étrangère vers la table G_GEO.TA_BPE';
COMMENT ON COLUMN G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE.fid_libelle IS 'Clé étrangère vers la table G_GEO.TA_LIBELLE pour connaitre la caractéristique de l''équipement';
COMMENT ON COLUMN G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE.nombre IS 'Nombre de salles de théatre par cinéma, théatre ou nombre d''aires de pratique d''un même type au sein de l''équipement';

-- 3. Création de la clé primaire
ALTER TABLE G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE
ADD CONSTRAINT TA_BPE_CARACTERISTIQUE_QUANTITATIVE_PK
PRIMARY KEY("OBJECTID")
USING INDEX TABLESPACE "G_ADT_INDX";

-- 4. clé étrangère

-- 4.1 clé étrangère vers la table G_GEO.TA_BPE
ALTER TABLE G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE
ADD CONSTRAINT  TA_BPE_CARACTERISTIQUE_QUANTITATIVE_FID_BPE_FK
FOREIGN KEY ("FID_BPE")
REFERENCES  G_GEO.TA_BPE ("OBJECTID");

-- 4.2 clé étrangère vers la table TA_LIBELLE pour connaitre la caractéristique de l'equipement
ALTER TABLE G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE
ADD CONSTRAINT  TA_BPE_CARACTERISTIQUE_QUANTITATIVE_FID_LIBELLE_FK
FOREIGN KEY ("FID_LIBELLE")
REFERENCES  G_GEO.TA_LIBELLE ("OBJECTID");

-- 4.5 Création des index sur les cléfs étrangères.
CREATE INDEX TA_BPE_CARACTERISTIQUE_QUANTITATIVE_FID_BPE_IDX ON G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE(fid_bpe)
    TABLESPACE G_ADT_INDX;

CREATE INDEX TA_BPE_CARACTERISTIQUE_QUANTITATIVE_FID_LIBELLE_IDX ON G_GEO.TA_BPE_CARACTERISTIQUE_QUANTITATIVE(fid_libelle)
    TABLESPACE G_ADT_INDX;