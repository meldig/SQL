/*
TA_GG_REPERTOIRE : Table qui présente les chemins d''accès aux fichiers des dossiers gestiongeo..
*/

-- 1. Création de la table TA_GG_REPERTOIRE
CREATE TABLE G_GESTIONGEO.TA_GG_REPERTOIRE (
	OBJECTID NUMBER(38,0) GENERATED BY DEFAULT AS IDENTITY START WITH 1 INCREMENT BY 1,
	REPERTOIRE VARCHAR2(4000 BYTE) NOT NULL,
	FID_LIBELLE NUMBER(38,0) NOT NULL
 );


 -- 2. Les commentaires
COMMENT ON TABLE G_GESTIONGEO.TA_GG_REPERTOIRE IS 'Table qui présente les chemins d''accès aux fichiers des dossiers gestiongeo.';
COMMENT ON COLUMN G_GESTIONGEO.TA_GG_REPERTOIRE.OBJECTID IS 'Clé primaire de la table.';
COMMENT ON COLUMN G_GESTIONGEO.TA_GG_REPERTOIRE.REPERTOIRE IS 'Chemin des repertoire.';
COMMENT ON COLUMN G_GESTIONGEO.TA_GG_REPERTOIRE.FID_LIBELLE IS 'Clé étrangère vers la table G_GEO.TA_LIBELLE pour caractériser le chemin.';


-- 3. Les contraintes
-- 3.1. Contrainte de clé primaire
ALTER TABLE G_GESTIONGEO.TA_GG_REPERTOIRE
ADD CONSTRAINT TA_GG_REPERTOIRE_PK
PRIMARY KEY("OBJECTID")
USING INDEX TABLESPACE G_ADT_INDX;

-- 3.2. Contrainte de clé étrangère
ALTER TABLE G_GESTIONGEO.TA_GG_REPERTOIRE
ADD CONSTRAINT TA_GG_REPERTOIRE_FID_LIBELLE_FK
FOREIGN KEY("FID_LIBELLE")
REFERENCES G_GEO.TA_LIBELLE ("OBJECTID");


-- 4. Les indexes
CREATE INDEX G_GESTIONGEO."TA_GG_REPERTOIRE_REPERTOIRE_IDX" ON G_GESTIONGEO.TA_GG_REPERTOIRE ("REPERTOIRE") 
    TABLESPACE G_ADT_INDX;


-- 5. Les droits de lecture, écriture, suppression
GRANT SELECT ON G_GESTIONGEO.TA_GG_REPERTOIRE TO G_ADMIN_SIG;
GRANT SELECT ON G_GESTIONGEO.TA_GG_REPERTOIRE TO G_GESTIONGEO_R;
GRANT SELECT, INSERT, UPDATE, DELETE ON G_GESTIONGEO.TA_GG_REPERTOIRE TO G_GESTIONGEO_RW;

/
